# Супер Лабораторная работа 3
___
## В чем суть?
Представим, что бизнес, в котором мы создаем наш проект, хочет получить по итогу сайт для рекламы и продажи, например, футболок ... для любителей чая, поэтому он называется Tea-Short.

После первых преобразований мы можем начинать развитие нашего проекта.
Чтобы обеспечить возможность обслуживания большого потока посетителей, нужно сперва обратить внимание на скорость работы с данными.
Сейчас наша слабость - это запись в бд, из-за того, что sqlite медленно работает на больших потоках.
Также нам нужно организовать, на сколько это возможно, быстрый модуль для сохранения и отображения картинок.
Потому что веб-сервисы без картинок выглядят скудно и неинформативно.

Для того, чтобы быть готовым перепрыгнуть на другую БД в процессе разработки, мы введем прослойку кода между проектом и БД в виде ORM.
Это уже готовые технологии, которые нужно только подключить в проект и пользоваться ими.
Мы для примера возьмем популярную библиотеку SQLAlchemy, она по умолчанию умеет работать со всеми самыми популярными БД.

Для того, чтобы сохранять картинки, мы создадим структуру папок, позволяющую не нагружать файловую систему диска (она долго работает, когда много файлов в одной папке) и добавим таблицу в БД для хранения местоположений и имен картинок, чтобы мы потом могли найти их на диске.


## Что изменилось в веб-сервисе?
Была добавлена ORM, на нее была переведена работа с таблицей posts, создана таблица под изображения, добавлен класс для работы с ней с помощью ORM. Также был добавлен механизм хранения изображений. 
Изображения были добавлены на страницу отображения поста.

В наших импровизированных миграциях добавилась таблица с комментариями, но ORM-класса для нее пока что нет.
Зато есть тест, чтобы проверить работоспособность ORM, которую вы создадите, он находится по адресу http://127.0.0.1:5000/comtest.

## Что нужно сделать?
Вам пришла задача от бизнеса: Нужно сделать отображение изображений и описания на главной странице!

Также ваш тимлид поставил на вас задачу по созданию ORM-модели для таблицы комментариев.

Отображение:
- Просмотрите проект, оцените изменения, если вам что-то непонятно, разберитесь с этим с помощью гугла.
- Разверните его как в позапрошлой лабораторной.
- Запустить его теперь можно простым запуском питон файла app.py (с активированным виртуальным окружением), но можно и по старинке.
- Откройте файл с шаблоном posts, где реализовано отображение изображений и описаний (templates/post.html) и найдите куски кода которые нужно скопировать в шаблон index (templates/index.html).
- Скопируйте код, если понадобится, то подправьте его под свои нужды.
- Сохраните файлы, проверьте работу приложения, перезапустите сервер, если вы запускали его по старинке.

Модель:
- Создайте в папке models файл comment.py
- Скопируйте из любой модели код с импортом db и объявлением класса модели
- Откройте файл comments.sql (migrations/comments.sql), посмотрите, что из себя представляет таблица comments, которая уже создана в бд
- Подправите модель (Нужно изменить название модели на Comment, подправить названия полей, см. по аналогии), чтобы она соответствовала таблице
- Ваш добрый тимлид создал для вас в тестовом контроллере(test_controller) функцию для тестирования модели, а также тестовый шаблон и маршрут. Импортируйте в контроллер вашу модель (раскомментируйте) и проверьте ее работоспособность, открыв ссылку http://127.0.0.1:5000/comtest
- В таблице комментов уже есть одна запись, которая выведется на экран.
